{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

    <!-- Liens CSS locaux -->
    <link rel="stylesheet" href="{% static 'assest/stylesheet/normalize.css' %}">
    <link rel="stylesheet" href="{% static 'assest/stylesheet/master.css' %}">
    <link rel="stylesheet" href="{% static 'assest/css/fontello.css' %}">

    <!-- Google Fonts (ne pas utiliser static ici) -->
    <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@100&family=Lora&display=swap" rel="stylesheet">
</head>

<body>
    <header>
        <nav>
            <section>
                <div>
                    <figure><img src="{% static 'assest/img/Art_Revivelogo.png' %}" alt=""></figure>
                </div>
                <section>
                    <div>
                        <div>
                            <div><i class="demo-icon icon-phone"></i></div>
                            <div>
                                <span>216 77143800 </span>
                                <span><a href="">ArtRevive@gmail.com</a></span>
                            </div>
                        </div>
                        <div>
                            <div><i class="demo-icon icon-location"></i></div>
                            <div>
                                <span>18, rue de l'Usine - ZI Charguia II Airport
                                    </span>
                                <span>2035 Ariana</span>
                            </div>
                        </div>
                    </div>
                    <div>
                        <a href="">Explore</a>
                    </div>
                </section>
            </section>

        </nav>
    </header>
    <section class="menu">
        <section>
            <section>
                <ul>
                    <li><a href="{% url 'home' %}">home</a></li>
                    <li><a href="">what's on</a>
                        <ul class="dropdown">
                            <li><a href="{% url 'classify' %}">Classify</a></li>
                            <li><a href="">2d to 3D</a></li>
                            <li><a href="">Reconstruct</a></li>
                        </ul>
                    </li>
                    <li><a href="https://sites.google.com/view/our-site-pi-clb/">visit</a>
                    </li>
                    <li><a href="">about</a>
                        <ul class="dropdown">
                            <li><a href="">mission & history</a></li>
                            <li><a href="">on board & staff</a></li>
                            <li><a href="">career</a></li>
                            <li><a href="">sponsers</a></li>
                            <li><a href="">contact us</a></li>
                            <li><a href="">membership</a></li>
                            <li><a href="">donate</a></li>
                            <li><a href="">facility rental</a></li>
                            <li><a href="">career details</a></li>
                        </ul>
                    </li>
                    <li><a href="">collections</a>
                        <ul class="dropdown">
                            <li><a href="">collections type-1</a></li>
                            <li><a href="">collections type-2</a></li>
                            <li><a href="">single works</a></li>
                            <li><a href="">artists</a></li>
                            <li><a href="">single artist</a></li>
                        </ul>
                    </li>
                    <li><a href="">pages</a>
                        <ul class="dropdown">
                            <li><a href="">news</a></li>
                            <li><a href="">shop</a></li>
                            <li><a href="">image gallery</a></li>
                            <li><a href="">venues</a></li>
                            <li><a href="">FAQ</a></li>
                            <li><a href="">my account</a></li>
                        </ul>
                    </li>
                </ul>
            </section>
            <div><a href=""><i class="demo-icon icon-search"></i></a></div>
        </section>
    </section>
    <section id="banner">
        <section>
            <section>
                <div>
                    <h4>Classify</h4>
                    <h1>Identify whether an artwork is real or AI-generated</h1>
                </div>
            </section>
        </section>
    </section>
    <br><br><br><br>
    <aside class="newsletter">
        <h3>Predict Painting</h3>
        <form method="POST" action="{% url 'predict' %}" enctype="multipart/form-data">
            {% csrf_token %}
            <div style="text-align:center;">
                <label for="file-upload" class="a-muzze" id="file-label">Choisir un fichier</label>
                <input id="file-upload" type="file" name="image" accept="image/*" required style="display:none;">
            </div>
            <script>
                document.getElementById('file-upload').addEventListener('change', function() {
                    var fileName = this.files[0] ? this.files[0].name : 'Choisir un fichier';
                    document.getElementById('file-label').textContent = fileName;
                    
                    // Display the image preview
                    var file = this.files[0];
                    var reader = new FileReader();
                    reader.onloadend = function() {
                        document.getElementById('image-preview').src = reader.result;
                    };
                    if (file) {
                        reader.readAsDataURL(file);
                    }
                });
            </script>

            <div style="text-align:center; margin-top: 20px;">
                <img id="image-preview" src="" alt="Image preview" style="max-width: 300px; max-height: 300px; object-fit: contain;">
            </div>

            <div>
                <input type="submit" value="Predict">
            </div>
        </form>
    </aside>

    <div class="on-view" style="display: flex; justify-content: center; align-items: center; height: 200px; background-color: #333;">
        <aside>
            <div>
                <h5>
                    <div id="result" style="font-size: 1.5em; color: white; text-align: center;"></div>
                </h5>
            </div>
        </aside>
    </div>    
    <script>
        const form = document.querySelector('form');
        form.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(form);
            const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value;
            
            const response = await fetch("{% url 'predict' %}", {
                method: 'POST',
                body: formData,
                headers: {
                    'X-CSRFToken': csrfToken
                }
            });
        
            const result = await response.json();
        
            if (result.prediction) {
                document.getElementById('result').innerText = `Prediction: ${result.prediction}`;
            } else {
                document.getElementById('result').innerText = `Error: ${result.error}`;
            }
        });
    </script>

    <br><br>
    <footer>
        <section>
            <figure><img src="{% static 'assest/img/ArtRevive.png' %}" alt=""></figure>
            <ul>
                <li>
                    <h4>address</h4>
                </li>
                <li>
                    <address>18, rue de l'Usine - ZI Charguia II Airport 2035 Ariana</address>
                </li>
                <li><a href="">getting here</a></li>
            </ul>
            <ul>
                <li>
                    <h4>hours</h4>
                </li>
                <li>Daily 9.30 am-6.00 pm</li>
                <li>Café Service
                    <ul>
                        <li>Daily 10.00 am-7.00 pm</li>
                    </ul>
                </li>
            </ul>
            <ul>
                <li>
                    <h4>contact us</h4>
                </li>
                <li><a href="">+216 77143800</a></li>
                <li><a href="">ArtRevive@gmail.com</a></li>
            </ul>
        </section>
        <section>
            <span><a href=""><i class="demo-icon icon-instagram"></i></a><a href=""><i class="demo-icon icon-twitter"></i></a>
                <a href=""><i class="demo-icon icon-facebook"></i></a><a href=""><i class="demo-icon icon-pinterest"></i></a></span>
            <span>Museum Template - Mad UX © 2020. All Rights Reserved</span>
            <span>pantea javadi 12 July 2022</span>
        </section>
    </footer>
    <br>

</body>
</html>
